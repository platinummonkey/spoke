import{c as L,j as e,B as a,V as A,I as _,S as C,H as c,T as i,a as k,r as b,A as M,b as z,d as B,e as E,f as R,L as f,g as W,h as m,i as T,k as u}from"./index-DxdKUaIe.js";import{L as D,F as y}from"./LoadingSkeleton-CJgGTi50.js";import{B as S,a as v,b as I}from"./breadcrumb-item-B60tr35O.js";import{E as H}from"./ExternalLink-DKQCU2V3.js";const N=L({d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z",displayName:"WarningIcon"}),V=({title:o,description:h,icon:l="search",actionLabel:t,onAction:n})=>{const d=l==="search"?C:N;return e.jsx(a,{textAlign:"center",py:12,px:6,bg:"gray.50",borderRadius:"md",borderWidth:1,borderColor:"gray.200",children:e.jsxs(A,{spacing:4,children:[e.jsx(_,{as:d,boxSize:12,color:"gray.400","aria-hidden":"true"}),e.jsx(c,{size:"md",color:"gray.700",children:o}),e.jsx(i,{color:"gray.600",maxW:"400px",children:h}),t&&n&&e.jsx(k,{colorScheme:"blue",onClick:n,mt:2,"aria-label":t,children:t})]})})},Q=({modules:o=[],loading:h,error:l,retry:t})=>{const[n,d]=b.useState(""),x=b.useMemo(()=>{if(!n.trim())return o;const r=n.toLowerCase();return o.filter(s=>s.name.toLowerCase().includes(r)||s.description&&s.description.toLowerCase().includes(r))},[o,n]),w=r=>new Date(r).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return h?e.jsxs(a,{p:4,children:[e.jsx(S,{mb:4,children:e.jsx(v,{isCurrentPage:!0,children:e.jsx(I,{children:"Modules"})})}),e.jsx(c,{size:"lg",mb:4,children:"Available Modules"}),e.jsx(D,{type:"module-list",count:5})]}):l?e.jsx(a,{p:4,children:e.jsxs(M,{status:"error",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",minH:"200px",borderRadius:"md",mb:4,children:[e.jsx(z,{boxSize:"40px",mr:0}),e.jsx(c,{size:"md",mt:4,mb:1,children:"Failed to load modules"}),e.jsx(i,{maxW:"500px",mt:2,children:l.message||"An unexpected error occurred while loading the module list."}),e.jsx(k,{onClick:t,colorScheme:"blue",mt:4,"aria-label":"Retry loading modules",children:"Try Again"})]})}):e.jsxs(a,{p:4,children:[e.jsx(S,{mb:4,children:e.jsx(v,{isCurrentPage:!0,children:e.jsx(I,{children:"Modules"})})}),e.jsxs(y,{justify:"space-between",align:"center",mb:4,children:[e.jsx(c,{size:"lg",children:"Available Modules"}),e.jsxs(B,{maxW:"400px",children:[e.jsx(E,{pointerEvents:"none",children:e.jsx(C,{color:"gray.300"})}),e.jsx(R,{placeholder:"Search modules...",value:n,onChange:r=>d(r.target.value),"aria-label":"Search modules by name or description"})]})]}),!x||x.length===0?e.jsx(V,{title:n?"No matching modules":"No modules available",description:n?`No modules match "${n}". Try a different search term.`:"There are no modules registered in the registry yet. Push your first module to get started.",actionLabel:n?"Clear Search":void 0,onAction:n?()=>d(""):void 0}):e.jsx(A,{align:"stretch",spacing:4,children:x.map(r=>{var j,g,p;const s=(j=r.versions)==null?void 0:j[0];return e.jsxs(a,{p:4,borderWidth:"1px",borderRadius:"lg",_hover:{shadow:"md"},transition:"box-shadow 0.2s",role:"article","aria-label":`Module: ${r.name}`,children:[e.jsx(f,{as:W,to:`/modules/${r.name}`,_hover:{textDecoration:"none",color:"blue.600"},"aria-label":`View ${r.name} module details`,children:e.jsx(c,{size:"md",children:r.name})}),e.jsx(i,{mt:2,children:r.description||"No description available"}),e.jsxs(a,{mt:2,display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(m,{children:[e.jsxs(i,{fontSize:"sm",color:"gray.500",children:[((g=r.versions)==null?void 0:g.length)||0," version",(((p=r.versions)==null?void 0:p.length)||0)!==1?"s":""]}),s&&e.jsxs(y,{alignItems:"center",gap:2,children:[e.jsxs(T,{colorScheme:"blue",children:["Latest: ",s.version]}),e.jsx(i,{fontSize:"xs",color:"gray.500",children:w(s.created_at)})]})]}),s&&s.source_info&&e.jsxs(m,{spacing:4,fontSize:"sm",color:"gray.600",children:[s.source_info.repository!=="unknown"&&e.jsx(u,{label:"View Repository",children:e.jsx(f,{href:s.source_info.repository,isExternal:!0,children:e.jsxs(m,{spacing:1,children:[e.jsx(i,{children:"Repository"}),e.jsx(H,{})]})})}),s.source_info.commit_sha!=="unknown"&&e.jsx(u,{label:"Commit SHA",children:e.jsxs(i,{children:["Commit: ",s.source_info.commit_sha.substring(0,7)]})}),s.source_info.branch!=="unknown"&&e.jsx(u,{label:"Branch",children:e.jsxs(i,{children:["Branch: ",s.source_info.branch]})})]})]})]},r.name)})})]})};export{Q as ModuleList};
