import{c as I,j as e,B as a,V as L,I as w,S as C,H as l,T as i,a as A,r as b,A as _,b as z,d as B,e as E,f as W,L as y,g as R,h as u,i as T}from"./index-CIglR0OD.js";import{B as f,a as S,b as v,L as H,F as k,T as m}from"./LoadingSkeleton-B0GOMzA8.js";const N=I({displayName:"ExternalLinkIcon",path:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[e.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),e.jsx("path",{d:"M15 3h6v6"}),e.jsx("path",{d:"M10 14L21 3"})]})}),V=I({d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z",displayName:"WarningIcon"}),D=({title:t,description:h,icon:c="search",actionLabel:o,onAction:n})=>{const d=c==="search"?C:V;return e.jsx(a,{textAlign:"center",py:12,px:6,bg:"gray.50",borderRadius:"md",borderWidth:1,borderColor:"gray.200",children:e.jsxs(L,{spacing:4,children:[e.jsx(w,{as:d,boxSize:12,color:"gray.400","aria-hidden":"true"}),e.jsx(l,{size:"md",color:"gray.700",children:t}),e.jsx(i,{color:"gray.600",maxW:"400px",children:h}),o&&n&&e.jsx(A,{colorScheme:"blue",onClick:n,mt:2,"aria-label":o,children:o})]})})},P=({modules:t=[],loading:h,error:c,retry:o})=>{const[n,d]=b.useState(""),x=b.useMemo(()=>{if(!n.trim())return t;const r=n.toLowerCase();return t.filter(s=>s.name.toLowerCase().includes(r)||s.description&&s.description.toLowerCase().includes(r))},[t,n]),M=r=>new Date(r).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return h?e.jsxs(a,{p:4,children:[e.jsx(f,{mb:4,children:e.jsx(S,{isCurrentPage:!0,children:e.jsx(v,{children:"Modules"})})}),e.jsx(l,{size:"lg",mb:4,children:"Available Modules"}),e.jsx(H,{type:"module-list",count:5})]}):c?e.jsx(a,{p:4,children:e.jsxs(_,{status:"error",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",minH:"200px",borderRadius:"md",mb:4,children:[e.jsx(z,{boxSize:"40px",mr:0}),e.jsx(l,{size:"md",mt:4,mb:1,children:"Failed to load modules"}),e.jsx(i,{maxW:"500px",mt:2,children:c.message||"An unexpected error occurred while loading the module list."}),e.jsx(A,{onClick:o,colorScheme:"blue",mt:4,"aria-label":"Retry loading modules",children:"Try Again"})]})}):e.jsxs(a,{p:4,children:[e.jsx(f,{mb:4,children:e.jsx(S,{isCurrentPage:!0,children:e.jsx(v,{children:"Modules"})})}),e.jsxs(k,{justify:"space-between",align:"center",mb:4,children:[e.jsx(l,{size:"lg",children:"Available Modules"}),e.jsxs(B,{maxW:"400px",children:[e.jsx(E,{pointerEvents:"none",children:e.jsx(C,{color:"gray.300"})}),e.jsx(W,{placeholder:"Search modules...",value:n,onChange:r=>d(r.target.value),"aria-label":"Search modules by name or description"})]})]}),!x||x.length===0?e.jsx(D,{title:n?"No matching modules":"No modules available",description:n?`No modules match "${n}". Try a different search term.`:"There are no modules registered in the registry yet. Push your first module to get started.",actionLabel:n?"Clear Search":void 0,onAction:n?()=>d(""):void 0}):e.jsx(L,{align:"stretch",spacing:4,children:x.map(r=>{var j,g,p;const s=(j=r.versions)==null?void 0:j[0];return e.jsxs(a,{p:4,borderWidth:"1px",borderRadius:"lg",_hover:{shadow:"md"},transition:"box-shadow 0.2s",role:"article","aria-label":`Module: ${r.name}`,children:[e.jsx(y,{as:R,to:`/modules/${r.name}`,_hover:{textDecoration:"none",color:"blue.600"},"aria-label":`View ${r.name} module details`,children:e.jsx(l,{size:"md",children:r.name})}),e.jsx(i,{mt:2,children:r.description||"No description available"}),e.jsxs(a,{mt:2,display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(u,{children:[e.jsxs(i,{fontSize:"sm",color:"gray.500",children:[((g=r.versions)==null?void 0:g.length)||0," version",(((p=r.versions)==null?void 0:p.length)||0)!==1?"s":""]}),s&&e.jsxs(k,{alignItems:"center",gap:2,children:[e.jsxs(T,{colorScheme:"blue",children:["Latest: ",s.version]}),e.jsx(i,{fontSize:"xs",color:"gray.500",children:M(s.created_at)})]})]}),s&&s.source_info&&e.jsxs(u,{spacing:4,fontSize:"sm",color:"gray.600",children:[s.source_info.repository!=="unknown"&&e.jsx(m,{label:"View Repository",children:e.jsx(y,{href:s.source_info.repository,isExternal:!0,children:e.jsxs(u,{spacing:1,children:[e.jsx(i,{children:"Repository"}),e.jsx(N,{})]})})}),s.source_info.commit_sha!=="unknown"&&e.jsx(m,{label:"Commit SHA",children:e.jsxs(i,{children:["Commit: ",s.source_info.commit_sha.substring(0,7)]})}),s.source_info.branch!=="unknown"&&e.jsx(m,{label:"Branch",children:e.jsxs(i,{children:["Branch: ",s.source_info.branch]})})]})]})]},r.name)})})]})};export{P as ModuleList};
