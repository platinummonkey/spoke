import{j as e,f as N,r as d}from"./index-DWlraR88.js";import{S as f,a as y,u as S}from"./StarRating-BrZwj9Tp.js";import"./useQuery-DUTFTxH0.js";function b({plugin:s}){const c=l=>l>=1e6?`${(l/1e6).toFixed(1)}M`:l>=1e3?`${(l/1e3).toFixed(1)}K`:l.toString(),i=l=>({language:"ðŸ”¤",validator:"âœ…",generator:"âš™ï¸",runner:"ðŸƒ",transform:"ðŸ”„"})[l]||"ðŸ“¦";return e.jsxs(N,{to:`/plugins/${s.id}`,className:"plugin-card",children:[e.jsxs("div",{className:"plugin-card-header",children:[e.jsx("div",{className:"plugin-icon",children:i(s.type)}),e.jsxs("div",{className:"plugin-title-section",children:[e.jsx("h3",{className:"plugin-name",children:s.name}),e.jsx(f,{level:s.security_level})]})]}),e.jsx("p",{className:"plugin-description",children:s.description}),e.jsxs("div",{className:"plugin-metadata",children:[e.jsxs("div",{className:"metadata-item",children:[e.jsx("span",{className:"metadata-label",children:"Author:"}),e.jsx("span",{className:"metadata-value",children:s.author})]}),e.jsxs("div",{className:"metadata-item",children:[e.jsx("span",{className:"metadata-label",children:"Type:"}),e.jsx("span",{className:"metadata-value",children:s.type})]}),s.latest_version&&e.jsxs("div",{className:"metadata-item",children:[e.jsx("span",{className:"metadata-label",children:"Version:"}),e.jsx("span",{className:"metadata-value",children:s.latest_version})]})]}),e.jsxs("div",{className:"plugin-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx(y,{rating:s.avg_rating||0}),s.review_count!==void 0&&e.jsxs("span",{className:"review-count",children:["(",s.review_count,")"]})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"download-icon",children:"ðŸ“¥"}),e.jsx("span",{className:"download-count",children:c(s.download_count)})]})]}),s.license&&e.jsx("div",{className:"plugin-license",children:e.jsx("span",{className:"license-badge",children:s.license})})]})}function C({searchQuery:s,onSearchChange:c,selectedType:i,onTypeChange:l,selectedSecurityLevel:n,onSecurityLevelChange:u,sortBy:o,onSortByChange:m}){return e.jsxs("div",{className:"plugin-filters",children:[e.jsx("div",{className:"search-section",children:e.jsx("input",{type:"text",className:"search-input",placeholder:"Search plugins...",value:s,onChange:a=>c(a.target.value)})}),e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"type-filter",children:"Type:"}),e.jsxs("select",{id:"type-filter",className:"filter-select",value:i,onChange:a=>l(a.target.value),children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"language",children:"Language"}),e.jsx("option",{value:"validator",children:"Validator"}),e.jsx("option",{value:"generator",children:"Generator"}),e.jsx("option",{value:"runner",children:"Runner"}),e.jsx("option",{value:"transform",children:"Transform"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"security-filter",children:"Security Level:"}),e.jsxs("select",{id:"security-filter",className:"filter-select",value:n,onChange:a=>u(a.target.value),children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"official",children:"Official"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"community",children:"Community"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"sort-filter",children:"Sort By:"}),e.jsxs("select",{id:"sort-filter",className:"filter-select",value:o,onChange:a=>m(a.target.value),children:[e.jsx("option",{value:"downloads",children:"Most Downloaded"}),e.jsx("option",{value:"rating",children:"Highest Rated"}),e.jsx("option",{value:"created_at",children:"Newest"})]})]})]})]})}function L(){const[s,c]=d.useState(""),[i,l]=d.useState("all"),[n,u]=d.useState("all"),[o,m]=d.useState("downloads"),[a,p]=d.useState(0),x=20,v=a*x,{data:t,isLoading:g,error:j}=S({type:i!=="all"?i:void 0,security_level:n!=="all"?n:void 0,search:s||void 0,sort_by:o,sort_order:"desc",limit:x,offset:v}),h=t?Math.ceil(t.total/x):0;return j?e.jsxs("div",{className:"marketplace-error",children:[e.jsx("h2",{children:"Error Loading Plugins"}),e.jsx("p",{children:j instanceof Error?j.message:"An error occurred"})]}):e.jsxs("div",{className:"plugin-marketplace",children:[e.jsxs("header",{className:"marketplace-header",children:[e.jsx("h1",{children:"Plugin Marketplace"}),e.jsx("p",{children:"Discover and install plugins to extend Spoke's functionality"})]}),e.jsx(C,{searchQuery:s,onSearchChange:c,selectedType:i,onTypeChange:l,selectedSecurityLevel:n,onSecurityLevelChange:u,sortBy:o,onSortByChange:m}),g?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading plugins..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"marketplace-stats",children:e.jsxs("span",{children:[(t==null?void 0:t.total)||0," plugins found"]})}),t&&t.plugins.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"plugin-grid",children:t.plugins.map(r=>e.jsx(b,{plugin:r},r.id))}),h>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{onClick:()=>p(r=>Math.max(0,r-1)),disabled:a===0,className:"pagination-button",children:"Previous"}),e.jsxs("span",{className:"pagination-info",children:["Page ",a+1," of ",h]}),e.jsx("button",{onClick:()=>p(r=>Math.min(h-1,r+1)),disabled:a>=h-1,className:"pagination-button",children:"Next"})]})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"No plugins found"}),e.jsx("p",{children:"Try adjusting your filters or search query"})]})]})]})}export{L as default};
