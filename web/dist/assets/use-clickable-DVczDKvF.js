import{r as o,l as q,n as R,o as W,j as X,q as Y,ao as H}from"./index-DWlraR88.js";function w(r){return r.sort((t,e)=>{const n=t.compareDocumentPosition(e);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(n&Node.DOCUMENT_POSITION_DISCONNECTED||n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}const J=r=>typeof r=="object"&&"nodeType"in r&&r.nodeType===Node.ELEMENT_NODE;function S(r,t,e){let n=r+1;return e&&n>=t&&(n=0),n}function M(r,t,e){let n=r-1;return e&&n<0&&(n=t),n}const k=typeof window<"u"?o.useLayoutEffect:o.useEffect,v=r=>r;var Q=Object.defineProperty,Z=(r,t,e)=>t in r?Q(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,u=(r,t,e)=>(Z(r,typeof t!="symbol"?t+"":t,e),e);class ${constructor(){u(this,"descendants",new Map),u(this,"register",t=>{if(t!=null)return J(t)?this.registerNode(t):e=>{this.registerNode(e,t)}}),u(this,"unregister",t=>{this.descendants.delete(t);const e=w(Array.from(this.descendants.keys()));this.assignIndex(e)}),u(this,"destroy",()=>{this.descendants.clear()}),u(this,"assignIndex",t=>{this.descendants.forEach(e=>{const n=t.indexOf(e.node);e.index=n,e.node.dataset.index=e.index.toString()})}),u(this,"count",()=>this.descendants.size),u(this,"enabledCount",()=>this.enabledValues().length),u(this,"values",()=>Array.from(this.descendants.values()).sort((e,n)=>e.index-n.index)),u(this,"enabledValues",()=>this.values().filter(t=>!t.disabled)),u(this,"item",t=>{if(this.count()!==0)return this.values()[t]}),u(this,"enabledItem",t=>{if(this.enabledCount()!==0)return this.enabledValues()[t]}),u(this,"first",()=>this.item(0)),u(this,"firstEnabled",()=>this.enabledItem(0)),u(this,"last",()=>this.item(this.descendants.size-1)),u(this,"lastEnabled",()=>{const t=this.enabledValues().length-1;return this.enabledItem(t)}),u(this,"indexOf",t=>{var e;return t?((e=this.descendants.get(t))==null?void 0:e.index)??-1:-1}),u(this,"enabledIndexOf",t=>t==null?-1:this.enabledValues().findIndex(e=>e.node.isSameNode(t))),u(this,"next",(t,e=!0)=>{const n=S(t,this.count(),e);return this.item(n)}),u(this,"nextEnabled",(t,e=!0)=>{const n=this.item(t);if(!n)return;const a=this.enabledIndexOf(n.node),i=S(a,this.enabledCount(),e);return this.enabledItem(i)}),u(this,"prev",(t,e=!0)=>{const n=M(t,this.count()-1,e);return this.item(n)}),u(this,"prevEnabled",(t,e=!0)=>{const n=this.item(t);if(!n)return;const a=this.enabledIndexOf(n.node),i=M(a,this.enabledCount()-1,e);return this.enabledItem(i)}),u(this,"registerNode",(t,e)=>{if(!t||this.descendants.has(t))return;const n=Array.from(this.descendants.keys()).concat(t),a=w(n);e!=null&&e.disabled&&(e.disabled=!!e.disabled);const i={node:t,index:-1,...e};this.descendants.set(t,i),this.assignIndex(a)})}}function re(){const[r,t]=q({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});return[r,t,()=>{const a=o.useRef(new $);return k(()=>()=>a.current.destroy()),a.current},a=>{const i=t(),[d,c]=o.useState(-1),l=o.useRef(null);k(()=>()=>{l.current&&i.unregister(l.current)},[]),k(()=>{if(!l.current)return;const h=Number(l.current.dataset.index);d!=h&&!Number.isNaN(h)&&c(h)});const b=v(a?i.register(a):i.register);return{descendants:i,index:d,enabledIndex:i.enabledIndexOf(l.current),register:R(b,l)}}]}const ee=W(function(t,e){const{templateAreas:n,gap:a,rowGap:i,columnGap:d,column:c,row:l,autoFlow:b,autoRows:h,templateRows:g,autoColumns:p,templateColumns:x,...N}=t,f={display:"grid",gridTemplateAreas:n,gridGap:a,gridRowGap:i,gridColumnGap:d,gridAutoColumns:p,gridColumn:c,gridRow:l,gridAutoFlow:b,gridAutoRows:h,gridTemplateRows:g,gridTemplateColumns:x};return X.jsx(Y.div,{ref:e,__css:f,...N})});ee.displayName="Grid";function te(){const r=o.useRef(new Map),t=r.current,e=o.useCallback((a,i,d,c)=>{r.current.set(d,{type:i,el:a,options:c}),a.addEventListener(i,d,c)},[]),n=o.useCallback((a,i,d,c)=>{a.removeEventListener(i,d,c),r.current.delete(d)},[]);return o.useEffect(()=>()=>{t.forEach((a,i)=>{n(a.el,a.type,i,a.options)})},[n,t]),{add:e,remove:n}}function y(r){var a,i;const t=((i=(a=r.composedPath)==null?void 0:a.call(r))==null?void 0:i[0])??r.target,{tagName:e,isContentEditable:n}=t;return e!=="INPUT"&&e!=="TEXTAREA"&&n!==!0}function ae(r={}){const{ref:t,isDisabled:e,isFocusable:n,clickOnEnter:a=!0,clickOnSpace:i=!0,onMouseDown:d,onMouseUp:c,onClick:l,onKeyDown:b,onKeyUp:h,tabIndex:g,onMouseOver:p,onMouseLeave:x,...N}=r,[f,A]=o.useState(!0),[I,C]=o.useState(!1),m=te(),U=s=>{s&&s.tagName!=="BUTTON"&&A(!1)},G=f?g:g||0,D=e&&!n,P=o.useCallback(s=>{if(e){s.stopPropagation(),s.preventDefault();return}s.currentTarget.focus(),l==null||l(s)},[e,l]),O=o.useCallback(s=>{I&&y(s)&&(s.preventDefault(),s.stopPropagation(),C(!1),m.remove(document,"keyup",O,!1))},[I,m]),L=o.useCallback(s=>{if(b==null||b(s),e||s.defaultPrevented||s.metaKey||!y(s.nativeEvent)||f)return;const E=a&&s.key==="Enter";i&&s.key===" "&&(s.preventDefault(),C(!0)),E&&(s.preventDefault(),s.currentTarget.click()),m.add(document,"keyup",O,!1)},[e,f,b,a,i,m,O]),F=o.useCallback(s=>{if(h==null||h(s),e||s.defaultPrevented||s.metaKey||!y(s.nativeEvent)||f)return;i&&s.key===" "&&(s.preventDefault(),C(!1),s.currentTarget.click())},[i,f,e,h]),T=o.useCallback(s=>{s.button===0&&(C(!1),m.remove(document,"mouseup",T,!1))},[m]),V=o.useCallback(s=>{if(s.button!==0)return;if(e){s.stopPropagation(),s.preventDefault();return}f||C(!0),s.currentTarget.focus({preventScroll:!0}),m.add(document,"mouseup",T,!1),d==null||d(s)},[e,f,d,m,T]),K=o.useCallback(s=>{s.button===0&&(f||C(!1),c==null||c(s))},[c,f]),B=o.useCallback(s=>{if(e){s.preventDefault();return}p==null||p(s)},[e,p]),j=o.useCallback(s=>{I&&(s.preventDefault(),C(!1)),x==null||x(s)},[I,x]),_=R(t,U);return f?{...N,ref:_,type:"button","aria-disabled":D?void 0:e,disabled:D,onClick:P,onMouseDown:d,onMouseUp:c,onKeyUp:h,onKeyDown:b,onMouseOver:p,onMouseLeave:x}:{...N,ref:_,role:"button","data-active":H(I),"aria-disabled":e?"true":void 0,tabIndex:D?void 0:G,onClick:P,onMouseDown:V,onMouseUp:K,onKeyUp:F,onKeyDown:L,onMouseOver:B,onMouseLeave:j}}export{ee as G,re as c,ae as u};
