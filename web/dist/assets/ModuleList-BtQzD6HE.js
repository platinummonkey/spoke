import{j as e,B as o,V as w,I as _,S as I,H as l,T as i,a as L,r as b,A as z,b as A,c as B,d as E,e as M,L as f,f as R,g as m,h as W,i as u}from"./index-s0R2GcZA.js";import{W as T,L as D,F as y}from"./LoadingSkeleton-JCjlwhwQ.js";import{B as S,a as v,b as C}from"./breadcrumb-item-DJt1fJRG.js";import{E as H}from"./ExternalLink-rzckiMgo.js";const V=({title:t,description:h,icon:c="search",actionLabel:a,onAction:n})=>{const d=c==="search"?I:T;return e.jsx(o,{textAlign:"center",py:12,px:6,bg:"gray.50",borderRadius:"md",borderWidth:1,borderColor:"gray.200",children:e.jsxs(w,{spacing:4,children:[e.jsx(_,{as:d,boxSize:12,color:"gray.400","aria-hidden":"true"}),e.jsx(l,{size:"md",color:"gray.700",children:t}),e.jsx(i,{color:"gray.600",maxW:"400px",children:h}),a&&n&&e.jsx(L,{colorScheme:"blue",onClick:n,mt:2,"aria-label":a,children:a})]})})},Q=({modules:t=[],loading:h,error:c,retry:a})=>{const[n,d]=b.useState(""),x=b.useMemo(()=>{if(!n.trim())return t;const r=n.toLowerCase();return t.filter(s=>s.name.toLowerCase().includes(r)||s.description&&s.description.toLowerCase().includes(r))},[t,n]),k=r=>new Date(r).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return h?e.jsxs(o,{p:4,children:[e.jsx(S,{mb:4,children:e.jsx(v,{isCurrentPage:!0,children:e.jsx(C,{children:"Modules"})})}),e.jsx(l,{size:"lg",mb:4,children:"Available Modules"}),e.jsx(D,{type:"module-list",count:5})]}):c?e.jsx(o,{p:4,children:e.jsxs(z,{status:"error",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",minH:"200px",borderRadius:"md",mb:4,children:[e.jsx(A,{boxSize:"40px",mr:0}),e.jsx(l,{size:"md",mt:4,mb:1,children:"Failed to load modules"}),e.jsx(i,{maxW:"500px",mt:2,children:c.message||"An unexpected error occurred while loading the module list."}),e.jsx(L,{onClick:a,colorScheme:"blue",mt:4,"aria-label":"Retry loading modules",children:"Try Again"})]})}):e.jsxs(o,{p:4,children:[e.jsx(S,{mb:4,children:e.jsx(v,{isCurrentPage:!0,children:e.jsx(C,{children:"Modules"})})}),e.jsxs(y,{justify:"space-between",align:"center",mb:4,children:[e.jsx(l,{size:"lg",children:"Available Modules"}),e.jsxs(B,{maxW:"400px",children:[e.jsx(E,{pointerEvents:"none",children:e.jsx(I,{color:"gray.300"})}),e.jsx(M,{placeholder:"Search modules...",value:n,onChange:r=>d(r.target.value),"aria-label":"Search modules by name or description"})]})]}),!x||x.length===0?e.jsx(V,{title:n?"No matching modules":"No modules available",description:n?`No modules match "${n}". Try a different search term.`:"There are no modules registered in the registry yet. Push your first module to get started.",actionLabel:n?"Clear Search":void 0,onAction:n?()=>d(""):void 0}):e.jsx(w,{align:"stretch",spacing:4,children:x.map(r=>{var j,g,p;const s=(j=r.versions)==null?void 0:j[0];return e.jsxs(o,{p:4,borderWidth:"1px",borderRadius:"lg",_hover:{shadow:"md"},transition:"box-shadow 0.2s",role:"article","aria-label":`Module: ${r.name}`,children:[e.jsx(f,{as:R,to:`/modules/${r.name}`,_hover:{textDecoration:"none",color:"blue.600"},"aria-label":`View ${r.name} module details`,children:e.jsx(l,{size:"md",children:r.name})}),e.jsx(i,{mt:2,children:r.description||"No description available"}),e.jsxs(o,{mt:2,display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(m,{children:[e.jsxs(i,{fontSize:"sm",color:"gray.500",children:[((g=r.versions)==null?void 0:g.length)||0," version",(((p=r.versions)==null?void 0:p.length)||0)!==1?"s":""]}),s&&e.jsxs(y,{alignItems:"center",gap:2,children:[e.jsxs(W,{colorScheme:"blue",children:["Latest: ",s.version]}),e.jsx(i,{fontSize:"xs",color:"gray.500",children:k(s.created_at)})]})]}),s&&s.source_info&&e.jsxs(m,{spacing:4,fontSize:"sm",color:"gray.600",children:[s.source_info.repository!=="unknown"&&e.jsx(u,{label:"View Repository",children:e.jsx(f,{href:s.source_info.repository,isExternal:!0,children:e.jsxs(m,{spacing:1,children:[e.jsx(i,{children:"Repository"}),e.jsx(H,{})]})})}),s.source_info.commit_sha!=="unknown"&&e.jsx(u,{label:"Commit SHA",children:e.jsxs(i,{children:["Commit: ",s.source_info.commit_sha.substring(0,7)]})}),s.source_info.branch!=="unknown"&&e.jsx(u,{label:"Branch",children:e.jsxs(i,{children:["Branch: ",s.source_info.branch]})})]})]})]},r.name)})})]})};export{Q as ModuleList};
