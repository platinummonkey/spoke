# Migration Guide: example-module v1.0.0 â†’ v1.1.0

## Overview

This guide helps you migrate from `example-module` version 1.0.0 to version 1.1.0.

**Summary:**
- 2 breaking changes
- 3 new features
- 1 deprecation

## Breaking Changes

### 1. Field Removed: `User.phone_number`

**What changed:**
The `phone_number` field was removed from the `User` message.

**Migration steps:**
1. Search your codebase for `user.phone_number` or `user.PhoneNumber`
2. Remove all references to this field
3. If you need phone numbers, use the new `ContactInfo` message instead

**Before:**
```protobuf
message User {
  string user_id = 1;
  string email = 2;
  string phone_number = 3;  // REMOVED
}
```

**After:**
```protobuf
message User {
  string user_id = 1;
  string email = 2;
  ContactInfo contact_info = 3;  // NEW
}

message ContactInfo {
  string phone = 1;
  string address = 2;
}
```

### 2. Method Signature Changed: `GetUser`

**What changed:**
The `GetUser` method now requires authentication token.

**Migration steps:**
1. Update all `GetUser` calls to include auth token
2. Ensure your auth middleware is configured

**Before:**
```go
resp, err := client.GetUser(ctx, &pb.GetUserRequest{
    UserId: "123",
})
```

**After:**
```go
resp, err := client.GetUser(ctx, &pb.GetUserRequest{
    UserId: "123",
    AuthToken: "your-token-here",
})
```

## New Features

### 1. Batch Operations

New methods for batch operations:
- `BatchGetUsers` - Get multiple users in one call
- `BatchUpdateUsers` - Update multiple users at once

Example:
```go
resp, err := client.BatchGetUsers(ctx, &pb.BatchGetUsersRequest{
    UserIds: []string{"123", "456", "789"},
})
```

### 2. User Preferences

New `UserPreferences` message for storing user settings:
```protobuf
message UserPreferences {
  string theme = 1;
  string language = 2;
  bool notifications_enabled = 3;
}
```

### 3. Pagination Support

All list methods now support pagination:
```go
resp, err := client.ListUsers(ctx, &pb.ListUsersRequest{
    PageSize: 50,
    PageToken: "next-page-token",
})
```

## Deprecations

### `legacy_id` field

The `legacy_id` field in `User` is deprecated. Use `user_id` instead.
This field will be removed in v2.0.0.

## Testing Recommendations

1. Run your existing test suite
2. Test all user-related API calls
3. Verify authentication flows work correctly
4. Test batch operations with different payload sizes

## Rollback Plan

If you encounter issues:

1. **Before deploying:** Tag your current deployment
2. **If issues occur:** Revert to v1.0.0 and notify the team
3. **Database:** No schema changes required for rollback

## Support

For questions or issues:
- Check the Schema Diff tab for complete change list
- Review the API Explorer for updated method signatures
- Generate code examples in your language

## Timeline

- **Recommended upgrade window:** 1-2 weeks
- **Deprecation deadline:** v2.0.0 release (TBD)
