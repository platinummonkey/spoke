# Redis Sentinel Configuration for Spoke HA Stack

# Bind to all interfaces
bind 0.0.0.0

# Sentinel port
port 26379

# Run in the foreground
daemonize no

# Log file
logfile ""
loglevel notice

# Working directory
dir /data

# Monitor the Redis master
# sentinel monitor <master-name> <ip> <port> <quorum>
# Quorum: minimum number of Sentinels that need to agree for failover
sentinel monitor spoke-redis redis-master 6379 2

# Authentication
sentinel auth-pass spoke-redis spoke-redis-password

# How long (in milliseconds) a master or replica must be unreachable
# before it's considered down
sentinel down-after-milliseconds spoke-redis 5000

# Maximum time for a replica to complete sync with new master during failover
sentinel failover-timeout spoke-redis 10000

# How many replicas can be reconfigured in parallel during failover
# Setting to 1 is safer but slower
sentinel parallel-syncs spoke-redis 1

# Deny scripts by default for security
sentinel deny-scripts-reconfig yes

# Notification scripts (optional)
# sentinel notification-script spoke-redis /etc/redis/notify.sh
# sentinel client-reconfig-script spoke-redis /etc/redis/reconfig.sh
